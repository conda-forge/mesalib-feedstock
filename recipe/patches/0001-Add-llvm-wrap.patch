From d32e019ee0e9ed53f1a631f2bdc2800bcd8239c0 Mon Sep 17 00:00:00 2001
From: Jarrett Johnson <jarrett.johnson@schrodinger.com>
Date: Sun, 23 Mar 2025 13:02:14 -0400
Subject: [PATCH 1/2] Add llvm wrap

---
 subprojects/llvm/meson.build | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)
 create mode 100644 subprojects/llvm/meson.build

diff --git a/subprojects/llvm/meson.build b/subprojects/llvm/meson.build
new file mode 100644
index 00000000000..bdb863a332e
--- /dev/null
+++ b/subprojects/llvm/meson.build
@@ -0,0 +1,34 @@
+project('llvm', ['cpp'])
+
+cpp = meson.get_compiler('cpp')
+
+_deps = []
+_prefix = get_option('prefix')
+_search = join_paths(_prefix, 'lib')
+ message(_search)
+
+# Find all LLVM libs via llvm-config
+_llvm_libs = run_command('llvm-config', '--libnames').stdout().strip().split()
+llvm_libs = []
+foreach lib : _llvm_libs
+    llvm_libs += lib.replace('.lib', '')
+endforeach
+message(llvm_libs)
+
+foreach d : llvm_libs
+    _deps += cpp.find_library(d, dirs : _search)
+endforeach
+
+foreach d : ['xml2', 'z', 'zstd']
+    _deps += cpp.find_library(d, dirs : _search)
+endforeach
+
+foreach d : ['psapi', 'shell32', 'ole32', 'uuid', 'advapi32', 'ws2_32', 'ntdll']
+    _deps += cpp.find_library(d)
+endforeach
+
+dep_llvm = declare_dependency(
+  include_directories : join_paths(_prefix, 'include'),
+  dependencies : _deps,
+  version : '20.1.1',
+)
diff --git a/meson_options.txt b/meson_options.txt
index 0147cafcb14..697da360488 100644
--- a/meson_options.txt
+++ b/meson_options.txt
@@ -796,3 +796,5 @@ option(
   value : false,
   description : 'Install the drivers internal shader compilers (if needed for cross builds).'
 )
+
+option('include_dir', type: 'string', value: '', description: 'Path to the include directory')
